(()=>{var e={};e.id=486,e.ids=[486],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5544:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(1506),r(4847),r(5844),r(6560);var a=r(3191),t=r(8716),n=r(7922),o=r.n(n),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(s,l);let d=["",{children:["(protected)",{children:["groups",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4847)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,5844)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,6560)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/not-found.tsx"]}],c=["/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/page.tsx"],u="/(protected)/groups/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(protected)/groups/page",pathname:"/groups",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8115:(e,s,r)=>{Promise.resolve().then(r.bind(r,8979))},8979:(e,s,r)=>{"use strict";r.d(s,{default:()=>u});var a=r(326),t=r(434),n=r(3071),o=r(772),i=r(567),l=r(99);let d=(0,r(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function c({group:e,isAdmin:s}){let r=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return a.jsx(t.default,{href:s?`/groups/${e.id}`:"#",children:(0,a.jsxs)(n.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer h-full",children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx(n.ll,{className:"text-lg",children:e.name}),(0,a.jsxs)(n.SZ,{children:[e.total_quotas," cotas no total"]})]}),s&&e.active_quotas>0&&a.jsx(t.default,{href:`/groups/${e.id}/draw`,onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(o.z,{size:"sm",variant:"outline",className:"gap-1",children:[a.jsx(l.Z,{className:"h-4 w-4"}),"Sortear"]})})]})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Valor do Bem:"}),a.jsx("span",{className:"font-semibold",children:r(e.asset_value)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Valor Mensal:"}),a.jsx("span",{className:"font-semibold",children:r(e.monthly_value)})]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)(i.C,{variant:"outline",className:"bg-success/10 flex-1 justify-center",children:[e.active_quotas," Ativas"]}),(0,a.jsxs)(i.C,{variant:"outline",className:"bg-accent/10 flex-1 justify-center",children:[e.contemplated_quotas," Contempladas"]})]}),a.jsx(i.C,{variant:e.is_active?"default":"secondary",className:"w-full justify-center",children:e.is_active?"Grupo Ativo":"Grupo Encerrado"})]})]})]})})}function u({groups:e,isAdmin:s}){return(0,a.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Grupos de Consorcio"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie os grupos de consorcio"})]}),s&&a.jsx(t.default,{href:"/groups/new",className:"w-full sm:w-auto sm:self-start",children:(0,a.jsxs)(o.z,{className:"w-full sm:w-auto",children:[a.jsx(d,{className:"mr-2 h-4 w-4"}),"Novo Grupo"]})})]}),e.length>0?a.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>a.jsx(c,{group:e,isAdmin:s},e.id))}):a.jsx(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"py-12 text-center",children:[a.jsx("p",{className:"text-muted-foreground",children:"Nenhum grupo cadastrado"}),s&&a.jsx(t.default,{href:"/groups/new",children:(0,a.jsxs)(o.z,{className:"mt-4",children:[a.jsx(d,{className:"mr-2 h-4 w-4"}),"Criar Primeiro Grupo"]})})]})})]})}},567:(e,s,r)=>{"use strict";r.d(s,{C:()=>i});var a=r(326);r(7577);var t=r(9360),n=r(7863);let o=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...r}){return a.jsx("div",{className:(0,n.cn)(o({variant:s}),e),...r})}},3071:(e,s,r)=>{"use strict";r.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>l});var a=r(326),t=r(7577),n=r(7863);let o=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));o.displayName="Card";let i=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...s},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let d=t.forwardRef(({className:e,...s},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},99:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(2881).Z)("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]])},1506:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(9510),t=r(9692);let n=(0,r(8570).createProxy)(String.raw`/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/GroupsPageClient.tsx#default`);async function o(){let e=await (0,t.e)(),{data:{session:s}}=await e.auth.getSession(),{data:r}=await e.from("profiles").select("role").eq("id",s?.user?.id??"").single(),{data:o}=await e.from("groups").select("*").order("created_at",{ascending:!1}),i=await Promise.all((o??[]).map(async s=>{let{data:r}=await e.from("quotas").select("status").eq("group_id",s.id);return{...s,active_quotas:r?.filter(e=>"active"===e.status).length??0,contemplated_quotas:r?.filter(e=>"contemplated"===e.status).length??0}}));return a.jsx(n,{groups:i,isAdmin:r?.role==="admin"})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[276,494,590,243,195,205,92],()=>r(5544));module.exports=a})();