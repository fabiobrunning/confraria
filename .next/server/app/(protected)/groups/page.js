(()=>{var e={};e.id=486,e.ids=[486],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5544:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(1506),a(4847),a(1985),a(6560);var r=a(3191),t=a(8716),n=a(7922),i=a.n(n),o=a(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(s,l);let c=["",{children:["(protected)",{children:["groups",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4847)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1985)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,6560)),"/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/not-found.tsx"]}],d=["/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/page.tsx"],u="/(protected)/groups/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(protected)/groups/page",pathname:"/groups",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8115:(e,s,a)=>{Promise.resolve().then(a.bind(a,8979))},8979:(e,s,a)=>{"use strict";a.d(s,{default:()=>u});var r=a(326),t=a(434),n=a(2643),i=a(772),o=a(567),l=a(99);let c=(0,a(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function d({group:e,isAdmin:s}){let a=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return r.jsx(t.default,{href:s?`/groups/${e.id}`:"#",children:(0,r.jsxs)(n.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer h-full",children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(n.ll,{className:"text-lg",children:e.name}),(0,r.jsxs)(n.SZ,{children:[e.total_quotas," cotas no total"]})]}),s&&e.active_quotas>0&&r.jsx(t.default,{href:`/groups/${e.id}/draw`,onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(i.z,{size:"sm",variant:"outline",className:"gap-1",children:[r.jsx(l.Z,{className:"h-4 w-4"}),"Sortear"]})})]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Valor do Bem:"}),r.jsx("span",{className:"font-semibold",children:a(e.asset_value)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Valor Mensal:"}),r.jsx("span",{className:"font-semibold",children:a(e.monthly_value)})]})]}),(0,r.jsxs)("div",{className:"pt-3 border-t space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)(o.C,{variant:"outline",className:"bg-success/10 flex-1 justify-center",children:[e.active_quotas," Ativas"]}),(0,r.jsxs)(o.C,{variant:"outline",className:"bg-accent/10 flex-1 justify-center",children:[e.contemplated_quotas," Contempladas"]})]}),r.jsx(o.C,{variant:e.is_active?"default":"secondary",className:"w-full justify-center",children:e.is_active?"Grupo Ativo":"Grupo Encerrado"})]})]})]})})}function u({groups:e,isAdmin:s}){return(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Grupos de Consorcio"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie os grupos de consorcio"})]}),s&&r.jsx(t.default,{href:"/groups/new",className:"w-full sm:w-auto sm:self-start",children:(0,r.jsxs)(i.z,{className:"w-full sm:w-auto",children:[r.jsx(c,{className:"mr-2 h-4 w-4"}),"Novo Grupo"]})})]}),e.length>0?r.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>r.jsx(d,{group:e,isAdmin:s},e.id))}):r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"py-12 text-center",children:[r.jsx("p",{className:"text-muted-foreground",children:"Nenhum grupo cadastrado"}),s&&r.jsx(t.default,{href:"/groups/new",children:(0,r.jsxs)(i.z,{className:"mt-4",children:[r.jsx(c,{className:"mr-2 h-4 w-4"}),"Criar Primeiro Grupo"]})})]})})]})}},1506:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var r=a(9510),t=a(9692);let n=(0,a(8570).createProxy)(String.raw`/Users/fabiobrunning/Desktop/Confraria/confraria-3/app/(protected)/groups/GroupsPageClient.tsx#default`);async function i(){let e=await (0,t.e)(),{data:{session:s}}=await e.auth.getSession(),{data:a}=await e.from("profiles").select("role").eq("id",s?.user?.id??"").single(),{data:i}=await e.from("groups").select("*").order("created_at",{ascending:!1}),o=await Promise.all((i??[]).map(async s=>{let{data:a}=await e.from("quotas").select("status").eq("group_id",s.id);return{...s,active_quotas:a?.filter(e=>"active"===e.status).length??0,contemplated_quotas:a?.filter(e=>"contemplated"===e.status).length??0}}));return r.jsx(n,{groups:o,isAdmin:a?.role==="admin"})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,225,590,141,442,84,756],()=>a(5544));module.exports=r})();