"use strict";(()=>{var e={};e.id=786,e.ids=[786,660],e.modules={1391:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>v,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>f,getStaticProps:()=>x,reportWebVitals:()=>g,routeModule:()=>O,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>_});var s=t(7093),o=t(5244),i=t(1323),n=t(1682),l=t.n(n),d=t(8141),c=t.n(d),u=t(744),m=e([u]);u=(m.then?(await m)():m)[0];let p=(0,i.l)(u,"default"),x=(0,i.l)(u,"getStaticProps"),f=(0,i.l)(u,"getStaticPaths"),h=(0,i.l)(u,"getServerSideProps"),v=(0,i.l)(u,"config"),g=(0,i.l)(u,"reportWebVitals"),_=(0,i.l)(u,"unstable_getStaticProps"),b=(0,i.l)(u,"unstable_getStaticPaths"),j=(0,i.l)(u,"unstable_getStaticParams"),N=(0,i.l)(u,"unstable_getServerProps"),y=(0,i.l)(u,"unstable_getServerSideProps"),O=new s.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/GroupEdit",pathname:"/GroupEdit",bundlePath:"",filename:""},components:{App:c(),Document:l()},userland:u});r()}catch(e){r(e)}})},6964:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{OL:()=>g,_T:()=>p,aR:()=>c,f$:()=>h,fY:()=>x,le:()=>_,xo:()=>f,yT:()=>v});var s=t(997),o=t(6689),i=t(2131),n=t(1073),l=t(569),d=e([i,n,l]);[i,n,l]=d.then?(await d)():d;let c=i.Root;i.Trigger;let u=i.Portal,m=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Overlay,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:t}));m.displayName=i.Overlay.displayName;let p=o.forwardRef(({className:e,...a},t)=>(0,s.jsxs)(u,{children:[s.jsx(m,{}),s.jsx(i.Content,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));p.displayName=i.Content.displayName;let x=({className:e,...a})=>s.jsx("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});x.displayName="AlertDialogHeader";let f=({className:e,...a})=>s.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});f.displayName="AlertDialogFooter";let h=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Title,{ref:t,className:(0,n.cn)("text-lg font-semibold",e),...a}));h.displayName=i.Title.displayName;let v=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Description,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));v.displayName=i.Description.displayName;let g=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Action,{ref:t,className:(0,n.cn)((0,l.d)(),e),...a}));g.displayName=i.Action.displayName;let _=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Cancel,{ref:t,className:(0,n.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));_.displayName=i.Cancel.displayName,r()}catch(e){r(e)}})},6260:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{r:()=>d});var s=t(997),o=t(6689),i=t(3702),n=t(1073),l=e([i,n]);[i,n]=l.then?(await l)():l;let d=o.forwardRef(({className:e,...a},t)=>s.jsx(i.Root,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...a,ref:t,children:s.jsx(i.Thumb,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));d.displayName=i.Root.displayName,r()}catch(e){r(e)}})},788:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{g:()=>l});var s=t(997),o=t(6689),i=t(1073),n=e([i]);i=(n.then?(await n)():n)[0];let l=o.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));l.displayName="Textarea",r()}catch(e){r(e)}})},6516:(e,a,t)=>{t.d(a,{A:()=>o});var r=t(6689);(function(){var e=Error("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}();var s=t(2697);function o(e=!1,a=!1){let[t,o]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!0);Object(function(){var e=Error("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e}())();let{toast:l}=(0,s.pm)();return{isAdmin:t,loading:i}}},744:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>_});var s=t(997),o=t(6689);(function(){var e=Error("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/Layout'");throw e.code="MODULE_NOT_FOUND",e}();var i=t(1612),n=t(9322),l=t(6889),d=t(569),c=t(788),u=t(2697),m=t(1928),p=t(6260),x=t(9721),f=t(7981),h=t(6516),v=t(6964),g=e([i,n,l,d,c,p,x,f,v]);function _(){let{id:e}=Object(function(){var e=Error("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e}())(),a=Object(function(){var e=Error("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e}())(),{toast:t}=(0,u.pm)(),[r,g]=(0,o.useState)(!0),[_,b]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1),{isAdmin:y}=(0,h.A)(),[O,w]=(0,o.useState)({name:"",description:"",asset_value:"",total_quotas:"",monthly_value:"",is_active:!0}),[E,C]=(0,o.useState)([]),[D,S]=(0,o.useState)([]),U=async r=>{r.preventDefault(),b(!0);try{let{error:r}=await Object(function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}()).from("groups").update({name:O.name,description:O.description||null,asset_value:parseFloat(O.asset_value),total_quotas:parseInt(O.total_quotas),monthly_value:parseFloat(O.monthly_value),is_active:O.is_active,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw r;for(let a of E)a.member_id&&"__none__"!==a.member_id?a.id?await Object(function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}()).from("quotas").update({member_id:a.member_id,status:a.status}).eq("id",a.id):await Object(function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}()).from("quotas").insert({group_id:e,quota_number:a.quota_number,member_id:a.member_id,status:a.status}):a.id&&await Object(function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}()).from("quotas").update({member_id:null,status:"active"}).eq("id",a.id);t({title:"Grupo atualizado",description:"As altera\xe7\xf5es foram salvas com sucesso"}),a("/groups")}catch(e){t({title:"Erro ao salvar",description:e instanceof Error?e.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},q=async()=>{if(e)try{let{error:r}=await Object(function(){var e=Error("Cannot find module '@/integrations/supabase/client'");throw e.code="MODULE_NOT_FOUND",e}()).from("groups").delete().eq("id",e);if(r)throw r;t({title:"Grupo exclu\xeddo",description:"O grupo foi removido com sucesso"}),a("/groups")}catch(e){t({title:"Erro ao excluir",description:e instanceof Error?e.message:"Erro desconhecido",variant:"destructive"})}};return r?s.jsx(Object(function(){var e=Error("Cannot find module '@/components/Layout'");throw e.code="MODULE_NOT_FOUND",e}()),{children:s.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):s.jsx(Object(function(){var e=Error("Cannot find module '@/components/Layout'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,s.jsxs)("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Editar Grupo"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie o grupo e suas cotas"})]}),(0,s.jsxs)(i.Zb,{children:[s.jsx(i.Ol,{children:s.jsx(i.ll,{children:"Dados do Grupo"})}),s.jsx(i.aY,{children:(0,s.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"name",children:"Nome do Grupo *"}),s.jsx(n.I,{id:"name",value:O.name,onChange:e=>w({...O,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"description",children:"Descri\xe7\xe3o"}),s.jsx(c.g,{id:"description",value:O.description,onChange:e=>w({...O,description:e.target.value}),rows:3})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"asset_value",children:"Valor do Bem *"}),s.jsx(n.I,{id:"asset_value",type:"number",step:"0.01",min:"0",value:O.asset_value,onChange:e=>w({...O,asset_value:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"monthly_value",children:"Valor Mensal *"}),s.jsx(n.I,{id:"monthly_value",type:"number",step:"0.01",min:"0",value:O.monthly_value,onChange:e=>w({...O,monthly_value:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"total_quotas",children:"Quantidade de Cotas *"}),s.jsx(n.I,{id:"total_quotas",type:"number",min:"1",value:O.total_quotas,onChange:e=>w({...O,total_quotas:e.target.value}),required:!0,disabled:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"A quantidade de cotas n\xe3o pode ser alterada ap\xf3s a cria\xe7\xe3o"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(p.r,{id:"is_active",checked:O.is_active,onCheckedChange:e=>w({...O,is_active:e})}),s.jsx(l._,{htmlFor:"is_active",children:"Grupo ativo"})]})]})})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsxs)(i.ll,{children:["Gerenciar Cotas (",E.length,")"]}),s.jsx(i.SZ,{children:"Atribua cada cota a um membro e defina seu status"})]}),s.jsx(i.aY,{children:s.jsx("div",{className:"space-y-3",children:E.map((e,a)=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 items-start sm:items-center p-3 border rounded-lg",children:[(0,s.jsxs)(f.C,{variant:"outline",className:"w-fit",children:["Cota #",e.quota_number]}),(0,s.jsxs)(x.Ph,{value:e.member_id,onValueChange:e=>{let t=[...E];t[a].member_id=e,C(t)},children:[s.jsx(x.i4,{className:"flex-1",children:s.jsx(x.ki,{placeholder:"Selecione um membro"})}),(0,s.jsxs)(x.Bw,{children:[s.jsx(x.Ql,{value:"__none__",children:"Nenhum membro"}),D.map(e=>s.jsx(x.Ql,{value:e.id,children:e.full_name},e.id))]})]}),(0,s.jsxs)(x.Ph,{value:e.status,onValueChange:e=>{let t=[...E];t[a].status=e,C(t)},disabled:!e.member_id||"__none__"===e.member_id,children:[s.jsx(x.i4,{className:"w-full sm:w-40",children:s.jsx(x.ki,{})}),(0,s.jsxs)(x.Bw,{children:[s.jsx(x.Ql,{value:"active",children:"Ativa"}),s.jsx(x.Ql,{value:"contemplated",children:"Contemplada"})]})]})]},e.quota_number))})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(d.z,{type:"button",variant:"outline",onClick:()=>a("/groups"),className:"flex-1",children:"Cancelar"}),y&&s.jsx(d.z,{type:"button",variant:"destructive",onClick:()=>N(!0),className:"flex-1",children:"Excluir Grupo"}),(0,s.jsxs)(d.z,{onClick:U,disabled:_,className:"flex-1",children:[_&&s.jsx(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Altera\xe7\xf5es"]})]}),s.jsx(v.aR,{open:j,onOpenChange:N,children:(0,s.jsxs)(v._T,{children:[(0,s.jsxs)(v.fY,{children:[s.jsx(v.f$,{children:"Confirmar Exclus\xe3o"}),s.jsx(v.yT,{children:"Tem certeza que deseja excluir este grupo? Esta a\xe7\xe3o n\xe3o pode ser desfeita. Todas as cotas vinculadas a este grupo tamb\xe9m ser\xe3o exclu\xeddas."})]}),(0,s.jsxs)(v.xo,{children:[s.jsx(v.le,{children:"Cancelar"}),s.jsx(v.OL,{onClick:q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Confirmar Exclus\xe3o"})]})]})})]})})}[i,n,l,d,c,p,x,f,v]=g.then?(await g)():g,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},2131:e=>{e.exports=import("@radix-ui/react-alert-dialog")},49:e=>{e.exports=import("@radix-ui/react-label")},3567:e=>{e.exports=import("@radix-ui/react-select")},4338:e=>{e.exports=import("@radix-ui/react-slot")},3702:e=>{e.exports=import("@radix-ui/react-switch")},6926:e=>{e.exports=import("class-variance-authority")},6593:e=>{e.exports=import("clsx")},8097:e=>{e.exports=import("tailwind-merge")}};var a=require("../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[682,988],()=>t(1391));module.exports=r})();